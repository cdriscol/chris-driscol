---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import BlogCard from "../components/BlogCard.astro";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 6);
---

<BaseLayout
  title="Chris Driscol"
  description="Short-form ideas and thoughts on technology, remote work, and life."
>
  <Header />
  <main class="container">
    <section class="hero">
      <h1>Hi, I'm Chris.</h1>
      <p>These are things I've been thinking about.</p>
    </section>

    <section class="posts">
      <h2>Latest Thoughts</h2>
      <div class="posts-grid">
        {posts.map((post) => <BlogCard post={post} />)}
      </div>
      <a href="/b" class="view-all">All my thoughts &rarr;</a>
    </section>
  </main>
  <Footer />
</BaseLayout>

<style>
  .container {
    max-width: 48rem;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .hero {
    padding: 3rem 0;
    text-align: center;
  }

  .hero h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-heading);
    margin-bottom: 0.5rem;
  }

  .hero p {
    font-size: 1.125rem;
    font-style: italic;
    color: var(--color-text-muted);
  }

  .posts {
    padding-top: 1rem;
  }

  .posts h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-heading);
    margin-bottom: 1.5rem;
  }

  .posts-grid {
    display: grid;
    gap: 1.5rem;
  }

  @media (min-width: 640px) {
    .posts-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .view-all {
    display: inline-block;
    margin-top: 2rem;
    font-size: 0.875rem;
    color: var(--color-link);
    transition: color 0.15s ease;
  }

  .view-all:hover {
    color: var(--color-link-hover);
  }
</style>
